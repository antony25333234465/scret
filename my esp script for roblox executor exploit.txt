-- MADE BY GORILLA1VR AND MY FRIEND
-- ESP SCRIPT 
-- NOW ITS ORANGE ESP
-- Updated

local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local DragPanel = Instance.new("Frame")
local ToggleButton = Instance.new("TextButton")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

-- Screengui little shit
ScreenGui.Name = "ESP_Toggle_GUI"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, -75, 0.5, -50)
MainFrame.Size = UDim2.new(0, 150, 0, 75)

-- you know
DragPanel.Name = "DragPanel"
DragPanel.Parent = MainFrame
DragPanel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
DragPanel.BorderSizePixel = 0
DragPanel.Size = UDim2.new(1, 0, 0, 25)

-- Enable dragging shit thinguy
local dragging, dragStart, startPos

DragPanel.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DragPanel.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Toggle button  shit
ToggleButton.Name = "ESP_Toggle_Button"
ToggleButton.Parent = MainFrame
ToggleButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ToggleButton.BorderSizePixel = 0
ToggleButton.Position = UDim2.new(0, 0, 0, 25)
ToggleButton.Size = UDim2.new(1, 0, 1, -25)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "Toggle ESP"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 20


ToggleButton.MouseEnter:Connect(function()
    local hoverTween = TweenService:Create(ToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(55, 55, 55)})
    hoverTween:Play()
end)

ToggleButton.MouseLeave:Connect(function()
    local leaveTween = TweenService:Create(ToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 35)})
    leaveTween:Play()
end)

-- Esp thingys heheh
local ESP_Enabled = false
local ESP_Boxes = {}

local function EnableESP()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            local character = player.Character
            if character then
                for _, part in pairs(character:GetChildren()) do
                    if part:IsA("BasePart") and not part:FindFirstChild("ESP_Box") then
                        local box = Instance.new("BoxHandleAdornment")
                        box.Name = "ESP_Box"
                        box.Adornee = part
                        box.AlwaysOnTop = true
                        box.ZIndex = 10
                        box.Size = part.Size + Vector3.new(0.1, 0.1, 0.1)
                        box.Color3 = Color3.new(1.000000, 0.400000, 0.000000) -- CHANGE COLOR IF U WANT
                        box.Transparency = 0.6
                        box.Parent = part
                        table.insert(ESP_Boxes, box)
                    end
                end
            end
        end
    end
end

-- I fixed some shit
local function DisableESP()
    for _, box in pairs(ESP_Boxes) do
        if box and box.Parent then
            box:Destroy()
        end
    end
    ESP_Boxes = {}
end

-- Off,ON Esp
local function ToggleESP()
    ESP_Enabled = not ESP_Enabled
    if ESP_Enabled then
        ToggleButton.Text = "ESP ON"
        EnableESP()
    else
        ToggleButton.Text = "ESP OFF"
        DisableESP()
    end
end -- Made by gorilla1vr

-- Connect  to roblox cursor
ToggleButton.MouseButton1Click:Connect(ToggleESP)-- Made by gorilla1vr